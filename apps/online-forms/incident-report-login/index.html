<!DOCTYPE html>
<html>
    <head>
        <title>Web Data Collection Form</title>
        <meta name='viewport' content='width=device-width, initial-scale=1'>
        <link rel="icon" href="data:,">
        <link rel="stylesheet" href="site.css" />
    </head>
    <body>
        <div id=header>
            <div id=logo>
                <span id=logo_a>Business</span><br>
                <span id=logo_b>Data Collection</span>
            </div>
            <div id=top_right>
                <u id=vm_auth_u onclick="$vm.auth(this)">Sign In</u>
            </div>
        </div>
        <div id=layout>
            <div id=content></div>
            <div id=footer>
                Open Source Code: <u><a target=_blank style='color:#fff' href=https://github.com/vmiis/web-portal >https://github.com/vmiis/web-portal</a></u>
            </div>
        </div>
    </body>
    <script>
        (function(){var i="f39f8959-8cd7-4570-8c0f-548306bf899a",n,t;typeof $vm=="undefined"&&($vm={});$vm.__print__=0;window.onbeforeprint=function(){$vm.__print__=1};window.onafterprint=function(){$vm.__print__=0};n=document.getElementById("content");t=new XMLHttpRequest;t.onreadystatechange=function(){var u,r,t,i;if(this.readyState==4){if(this.status==200){n.innerHTML=this.responseText;u=document.getElementsByTagName("head")[0];t=n.getElementsByTagName("script");for(i in t)r=document.createElement("script"),r.type="text/javascript",t[i].text!=undefined&&(r.text=t[i].text),t[i].src!=undefined&&t[i].src!=""&&(r.src=t[i].src),(t[i].src!=undefined&&t[i].src!=""||t[i].text!=undefined)&&u.appendChild(r)}this.status==404&&(n.innerHTML="Page not found.")}};t.open("GET","form.html",!0);t.send();window.onscroll=function(){var t=-window.scrollY/2,n=-t/100;n>.5&&(n=.5);document.getElementById("header").style.background="rgba(0,0,0,"+n+")"};$vm.auth=function(){var n=0,t=sessionStorage.getItem("id_token");if(t!=null){var r=t.split(".")[1],u=r.replace(/-/g,"+").replace(/_/g,"/"),f=decodeURIComponent(atob(u).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join("")),e=JSON.parse(f),o=e.exp;Date.now()<o*1e3&&(n=1)}n==0?(url="https://login.microsoftonline.com/common/oauth2/v2.0/authorize",url+="?client_id="+i,url+="&response_type=id_token",url+="&redirect_uri="+window.location.origin+"/auth.html",url+="&scope=openid user.read profile",url+="&response_mode=fragment",url+="&state=exchange-microsoft-token.wapp_microsoft",url+="&nonce=678910",url+="&prompt=select_account",window.open(url)):(sessionStorage.removeItem("id_token"),document.getElementById("vm_auth_u").textContent="Sign in")};window.onmessage=function(n){if(n.origin==window.location.origin){var t=n.data.href.split("id_token=").pop().split("&")[0];sessionStorage.setItem("id_token",t);document.getElementById("vm_auth_u").textContent="Sign out"}}})()
    </script>
    <style>
        body{
            background-image: url(https://images.unsplash.com/photo-1469967700385-5b0140e16e33?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80);
        }
    </style>
    <style>
        #auth{
            color:#fff;
        }
    </style>
</html>